# Journal Entry: 2026-01-25-0722
## Goals
- Fix MkDocs metadata crash and complete sprint planning

## Execution
Observation: I noticed that the MkDocs build was crashing with 'TypeError: argument of type 'NoneType' is not iterable' when handling media posts with 'title: null' in the frontmatter. This was caused by the 'MkDocsAdapter' writing 'title: null' to the YAML when the metadata value was missing.

Action: I implemented a '_clean_metadata' method in 'src/egregora/output_sinks/mkdocs/adapter.py' that removes keys with 'None' values before writing the frontmatter. I applied this sanitizer to all document writing methods ('_write_journal_doc', '_write_profile_doc', '_write_enrichment_doc', '_write_annotation_doc'). I also fixed a bug in '_write_profile_doc' where the 'posts' list was being omitted from the frontmatter because 'yaml.dump' was called too early. I verified the fix with a new unit test 'tests/unit/output_sinks/mkdocs/test_adapter_metadata.py' and by confirming the demo site builds successfully (even without content).

Reflection: This fix improves the robustness of the site generation pipeline, adhering to the 'Graceful Degradation' principle. By sanitizing metadata, we prevent downstream plugins (like 'mkdocs-macros-plugin') from crashing on unexpected null values. I also completed the Sprint 2 planning and feedback.
