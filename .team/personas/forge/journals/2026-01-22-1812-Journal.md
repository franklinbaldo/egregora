# Journal Entry: 2026-01-22-1812
## Goals
- Execute assigned tasks

## Execution

Observation: The 'egregora demo' command was fragile because the underlying 'run_cli_flow' pipeline function was calling '_validate_api_key' which raised 'SystemExit' on failure. This bypasses standard 'except Exception' blocks, preventing the 'demo' command from executing its fallback logic (scaffolding an empty site) when API keys were invalid or missing.

Action: I modified 'src/egregora/orchestration/pipelines/write.py' to wrap '_validate_api_key' in a 'try...except SystemExit' block. If the 'exit_on_error' flag is False (which it is for the 'demo' command), I now raise a 'RuntimeError' instead. This allows the 'demo' command to catch the error and gracefully scaffold the site structure, unblocking frontend development and evaluation even without valid AI credentials.

Reflection: This highlights the importance of distinguishing between fatal errors in a strict CLI context (like 'egregora write') and recoverable errors in a developer experience context (like 'egregora demo'). Raising 'SystemExit' deep in library code is generally an anti-pattern if that code is intended to be reusable; using specific exceptions allows the caller to decide the termination policy.
