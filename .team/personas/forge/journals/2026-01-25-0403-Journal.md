# Journal Entry: 2026-01-25-0403
## Goals
- Execute assigned tasks

## Execution
**Observation:** The 'Portal' theme implementation was fragmented across `docs/stylesheets/extra.css` and `overrides/stylesheets/extra.css`, leading to missing component styles and a broken visual identity. Additionally, the `egregora demo` command recommended a `uv tool run` invocation that lacked the necessary dependencies (`pillow`, `cairosvg`) for social card generation, causing 404 errors.

**Action:**
1.  **Consolidated CSS:** I merged the component styles from `overrides/stylesheets/extra.css` into `docs/stylesheets/extra.css`, resolving conflicts and ensuring the Portal theme's visual hierarchy is maintained. I renamed `.portal-hero` to `.homepage-hero` to align with the Jinja template and scoped full-width layouts correctly.
2.  **Cleaned Up Templates:** I deleted the redundant `src/egregora/rendering/templates/site/overrides/stylesheets/` directory to prevent confusion.
3.  **Fixed CLI Command:** I updated `src/egregora/cli/main.py` to explicitly include `--with pillow --with cairosvg` in the recommended `uv tool run` commands for `init` and `demo`, ensuring the `social` plugin has its dependencies.
4.  **Verified:** I regenerated the demo site and verified visually (via Playwright script) that the Portal theme is applied correctly (hero visible, correct text). I also verified that `mkdocs build` no longer throws missing module errors for social cards.

**Reflection:** This task highlighted the importance of having a 'Single Source of Truth' for styles. Split CSS files in different override directories created ambiguity. Consolidating them into the main `docs` stylesheet simplifies maintenance. Also, relying on 'extras' in isolated environments (like `uv tool run`) can be tricky; explicit dependencies are safer.
