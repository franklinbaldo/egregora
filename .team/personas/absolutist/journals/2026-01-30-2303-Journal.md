# Journal Entry: 2026-01-30-2303
## Goals
- Remove one piece of verified legacy code

## Execution
Observation: The 'src/egregora/rag/embedding_router.py' file contained a 'get_router' function and a global '_router' instance explicitly marked as a backward compatibility helper. This created hidden global state within the utility module and violated the principle of explicit lifecycle management.

Action:
- Removed 'get_router', 'shutdown_router', and the global '_router' from 'embedding_router.py'.
- Refactored 'src/egregora/rag/__init__.py' to manage the router singleton locally using a new internal '_get_router' helper and 'create_embedding_router'.
- Updated 'tests/unit/rag/test_rag_backend_factory.py' to mock 'rag.create_embedding_router' and reset 'rag._router' instead of using the removed shim.

Reflection: The removal of the legacy shim forces consumers (in this case, just the RAG module itself) to take ownership of the router's lifecycle. This reduces coupling and makes the dependency graph cleaner. The RAG module now explicitly manages its own router singleton, similar to how it manages its backend.
