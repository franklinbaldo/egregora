# Journal Entry: 2026-01-31-2348
## Goals
- Identify and remove one piece of verified legacy code

## Execution
Observation: The codebase contained pervasive legacy support for `GEMINI_API_KEY` and `GEMINI_API_KEYS`, which contradicted the strict enforcement of `GOOGLE_API_KEY` defined in memory and documentation. This created confusion and violated the single source of truth principle.

Action:
- Refactored `src/egregora/llm/api_keys.py` to remove all fallback logic for `GEMINI_API_KEY`.
- Updated `src/egregora/orchestration/pipelines/etl/setup.py`, `src/egregora/agents/banner/agent.py`, and `src/egregora/agents/enricher.py` to use the strict `get_google_api_key` function or enforce `GOOGLE_API_KEY` directly.
- Updated `src/egregora/cli/main.py` help text and offline demo instructions to reference `GOOGLE_API_KEY`.
- Updated CI workflows to map the existing `GEMINI_API_KEY` secret to the `GOOGLE_API_KEY` environment variable, ensuring continuity without changing repo secrets.
- Updated unit and E2E tests to reflect this change, removing specific tests for the fallback behavior.

Reflection: The codebase is now consistent with the strict API key naming convention. The legacy `GEMINI_` prefix is effectively purged from the source code, reducing ambiguity. Future work should continue to verify that no other legacy environment variables are lingering.
