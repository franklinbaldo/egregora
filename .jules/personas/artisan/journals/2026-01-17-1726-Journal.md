# Journal Entry: 2026-01-17-1726
## Goals
- Execute assigned tasks

## Execution
## ðŸ”¨ 2026-01-14 - Refactor OutputSink.list to scan and Fix Primitives

**Observation:**
I observed two significant quality issues in `src/egregora/output_adapters/base.py` and `src/egregora/data_primitives/`.
First, the `OutputSink` protocol and its implementations defined a method named `list`, which shadowed the built-in Python `list` type. This led to confusion and necessitated workarounds in type annotations.
Second, `src/egregora/data_primitives/__init__.py` contained dummy placeholder classes instead of importing the actual implementations from `document.py`. This caused static analysis tools (mypy) to fail and potentially runtime issues if those classes were instantiated from the package import.

**Action:**
I renamed the `list` method to `scan` across the `OutputSink` protocol, `BaseOutputSink`, `DbOutputSink`, and `ContentRepository`. I updated all call sites in `formatting.py`, `journal.py`, `materializer.py`, and `runner.py` to use `scan()`.
I also fixed `src/egregora/data_primitives/__init__.py` to correctly export `DocumentMetadata`, `OutputSink`, and `UrlConvention` from `src/egregora/data_primitives/document.py`.
Finally, I improved `BaseOutputSink` by adding the missing abstract method `documents` and added unit tests in `tests/unit/output_adapters/test_base.py` to verify the new `scan` method.

**Reflection:**
Renaming `list` to `scan` not only resolved the shadowing issue but also clarified the intent of the method: it iterates (scans) over documents rather than returning a list. The fix in `__init__.py` highlights the importance of checking package exports. Future sessions should continue to look for similar shadowing issues and incomplete package definitions.
