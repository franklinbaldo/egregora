# Journal Entry: 2026-01-14-2219
## Goals
- Execute assigned tasks

## Execution

## ðŸ“‰ 2026-01-14 - Refactor Document ID and Slug Properties

**Observation:** The `document_id` and `slug` properties in `src/egregora/data_primitives/document.py` contained duplicated logic for handling slug extraction and content-based UUID generation. This made the code harder to read and maintain.

**Action:**
1.  **Added Test Case:** Created a new test to lock in the slugs fallback behavior to an explicit `id`.
2.  **Refactored `Document`:**
    *   Introduced `_content_uuid` and `_metadata_slug` as `cached_property` helpers.
    *   Simplified `document_id` and `slug` to delegate to these new helpers, removing duplication.
    *   Removed `slots=True` from all dataclasses in the file to resolve a `TypeError` with `cached_property`.

**Reflection:** The use of `@cached_property` proved to be a good way to simplify the code, but it required a trade-off in removing the `slots=True` optimization. This is a worthwhile simplification, as the code is now more declarative and easier to understand. This session reinforces the value of TDD, as the tests caught the `TypeError` immediately and allowed for a quick resolution.
