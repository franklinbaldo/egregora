# Jules Persona Priority Configuration
# Defines which personas can run when the build is broken vs stable.

[priorities]
# Critical personas that ALWAYS run, even when tests are failing.
# These personas are focused on fixing the build and stabilizing the repo.
critical = [
    "sheriff",    # ğŸ¤  Test Stability - Fixes flaky/broken tests
    "janitor",    # ğŸ§¹ Code Hygiene - Fixes import errors, linting issues
    "sentinel",   # ğŸ›¡ï¸ Security - Critical security fixes
]

# High priority personas that run when build is mostly stable but may have minor issues
high_priority = [
    "shepherd",   # ğŸ§‘â€ğŸŒ¾ Test Coverage - Adds tests
    "builder",    # ğŸ—ï¸ Data Architecture - Schema fixes
    "sapper",     # ğŸ’£ Exception Structuring - Error handling
]

# Normal priority personas that only run when all tests pass
normal_priority = [
    "essentialist", # ğŸ’ Pragmatism & Cuts
    "curator",      # ğŸ­ UX Evaluation
    "refactor",     # ğŸ”§ Code Improvements
    "visionary",    # ğŸ”® Moonshot Strategy
    "bolt",         # âš¡ Performance Check
    "artisan",      # ğŸ”¨ Code Craftsmanship
    "palette",      # ğŸ¨ Design System
    "scribe",       # âœï¸ Technical Writing
    "forge",        # âš’ï¸ Feature Implementation
    "weaver",       # ğŸ•¸ï¸ Integration Build
    "simplifier",   # ğŸ“‰ Complexity Reduction
    "docs_curator", # ğŸ“š Docs Gardening
]

[build_status]
# Configuration for determining build health
# The scheduler should check if tests pass before allowing non-critical personas

# Command to check if tests pass (exit code 0 = pass, non-zero = fail)
test_command = "uv run pytest tests/ -q --tb=no"

# If true, block normal_priority personas when test_command fails
block_on_test_failure = true

# If true, allow high_priority personas even when some tests fail
# (as long as imports work and basic functionality is intact)
allow_high_priority_on_partial_failure = true
