# ðŸŽ­ Curator's UX Vision for Egregora

This document outlines the user experience and user interface (UX/UI) vision for the blogs generated by Egregora. It is a living document, developed and maintained by the Curator persona.

## Core Principles

1.  **Immersive First:** The design must create an immersive, engaging "portal" experience that draws the reader into the collective consciousness. The UI should feel intentional, polished, and distinct.
2.  **Content-First:** The design must prioritize readability and the clear presentation of the generated content. All other design elements are secondary.
3.  **Autonomously Generated, Professionally Presented:** The blog is generated 100% autonomously, but it should not look like it. The final output must be polished, professional, and indistinguishable from a high-quality, human-curated site.
4.  **Privacy-First by Default:** The user's privacy is paramount. Features that could compromise privacy (like analytics) must be opt-in, never on by default.
5.  **Measurable Quality:** All UX decisions should be backed by data where possible. We will use tools like Lighthouse to measure and track our progress on accessibility, performance, and SEO.
6.  **Accessible to All:** The final site must be usable by everyone, regardless of their abilities. We will adhere to WCAG AA standards as a minimum baseline.
7.  **Graceful Degradation:** The site generation process must be resilient. If external dependencies like AI content generation fail, the process should still complete successfully, scaffolding a buildable "empty state" of the site. This allows for inspection and development of the core UX even when content is unavailable.

## Technical & Architectural Discoveries

### Template Architecture

**CRITICAL FINDING:** The templates for the MkDocs site have been moved to Jinja2 files in `src/egregora/rendering/templates/site/`.

Key locations:
-   `src/egregora/output_sinks/mkdocs/scaffolding.py`: Renders these templates during the scaffold process.
-   `src/egregora/rendering/templates/site/mkdocs.yml.jinja`: The main configuration template.
-   `src/egregora/rendering/templates/site/overrides/stylesheets/extra.css`: The consolidated stylesheet containing both the "Portal" theme and layout fixes.

### Developer Experience
-   **Status:** Stable.
-   **Observation:** The `egregora demo` command generates a valid scaffold even when API keys are missing, fulfilling the "Graceful Degradation" principle. The previous event loop error appears to be resolved or non-blocking.

## Design System (V1 - "The Portal")

This section defines the "Portal" design system, which aims to create a dark, immersive, and premium experience.

### CSS Architecture
-   **Status:** Verified.
-   **Details:** The CSS has been successfully consolidated into `overrides/stylesheets/extra.css`. The shadowing issue caused by the orphan `docs/` file has been resolved. The site now correctly renders both the immersive Portal theme (Hero, Glassmorphism) and the structural layout improvements (Related Posts, Media Grid).

### Color Palette
-   **Status:** Verified.
-   **Primary:** A deep, thoughtful blue (`#2c3e50`) defined in `extra.css`.
-   **Accent:** A vibrant, energetic yellow (`#f9d423`) defined in `extra.css`.
-   **Implementation:** `mkdocs.yml` uses `primary: custom` and `accent: custom`.

### Scoping and Usability
-   **Status:** Verified.
-   **Details:** Aggressive global overrides have been scoped. The homepage uses `:has(.homepage-hero)` to apply immersive styles only where appropriate, ensuring standard documentation pages remain readable with visible TOCs.

### Typography
-   **Status:** Verified (Compliant).
-   **Fonts:** `Outfit` for headings and `Inter` for body text.
-   **Implementation:** `Outfit` is locally bundled in `assets/fonts/`. `Inter` is handled by the `privacy` plugin, which automatically downloads and bundles it.
-   **Privacy:** Fully compliant (No external requests).

### Navigation
-   **Status:** Verified.
-   **Details:** The navigation hierarchy is correct. Homepage cards link correctly to `/posts/profiles/`, `/posts/media/`, and `/feeds/`.

### Feeds Page
-   **Status:** Verified.
-   **Details:** The template `docs/feeds/index.md.jinja` is correctly registered and generates the `/feeds/` page, providing RSS and JSON feed options.

### Analytics
-   **Status:** Verified (Removed).
-   **Details:** Analytics placeholders have been removed from the default configuration.

## Privacy & Compliance

**Status:** Compliant

The site adheres to the "Privacy-First" principle by ensuring no requests are made to external third parties (Google Fonts, CDNs, Analytics) during normal operation.

### Compliance Measures

1.  **Google Fonts (Resolved):**
    -   `Outfit` font is manually bundled in `assets/fonts/` and served locally.
    -   `Inter` and `Roboto Mono` are handled by the `mkdocs-material` `privacy` plugin, which automatically downloads and bundles them at build time.

2.  **MathJax (Resolved):**
    -   MathJax libraries are vendored in `javascripts/mathjax.js` and `javascripts/tex-mml-chtml.js` and served locally.
    -   External CDN references have been removed from `mkdocs.yml`.

3.  **Analytics:**
    -   No analytics scripts are included by default.

### Verification
-   **Automated:** `tests/step_defs/test_privacy_steps.py` intercepts network requests during site navigation and asserts that no connections are made to known external domains.
-   **Manual:** Generating a demo site (`uv run egregora demo`) and inspecting `mkdocs.yml` and `extra.css` confirms local asset references.
