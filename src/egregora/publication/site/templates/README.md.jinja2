# {{ site_name }}

This site was generated automatically by [Egregora](https://github.com/franklinbaldo/egregora) from WhatsApp group conversations.

## ğŸš€ Quick Start

### Serve the site locally

```bash
# Install dependencies (if you have not already)
pip install "mkdocs-material[imaging]"

# Serve the site
mkdocs serve
```

The site will be available at `http://127.0.0.1:8000`.

### Process a new conversation export

```bash
# Process a WhatsApp export
egregora process \
  --zip_file=whatsapp-export.zip \
  --output=. \
  --gemini_key=YOUR_KEY
```

### Build for production

```bash
mkdocs build
```

Static assets will be written to `site/`.

## ğŸ“ Structure

```
.
â”œâ”€â”€ mkdocs.yml          # MkDocs + Egregora configuration
{% if docs_dir in [".", "./"] -%}
â”œâ”€â”€ index.md            # Homepage
â”œâ”€â”€ about.md            # About page
â”œâ”€â”€ posts/              # Generated blog posts
â”œâ”€â”€ profiles/           # Participant profiles
â””â”€â”€ media/              # WhatsApp media (images, videos, audio, documents)
{% else -%}
â”œâ”€â”€ {{ docs_dir }}/         # Content served by MkDocs
â”‚   â”œâ”€â”€ index.md        # Homepage
â”‚   â”œâ”€â”€ about.md        # About page
â”‚   â”œâ”€â”€ posts/          # Generated blog posts
â”‚   â”œâ”€â”€ profiles/       # Participant profiles
â”‚   â””â”€â”€ media/          # WhatsApp media (images, videos, audio, documents)
{% endif -%}
```

## âš™ï¸ Configuration

Edit `mkdocs.yml` to customize:

- **Theme and appearance** â€” section `theme:`
- **Markdown extensions** â€” section `markdown_extensions:`
- **Egregora settings** â€” section `extra.egregora:`
  - Custom writer prompt
  - RAG configuration
  - Profile settings

## ğŸ¤– Automated Updates (GitHub Actions)

This site includes a GitHub Actions workflow that automatically updates content from Google Drive.

### Setup Instructions

1. **Create a Google Cloud Service Account**
   - Go to [Google Cloud Console](https://console.cloud.google.com/)
   - Create a new project or select an existing one
   - Enable the Google Drive API
   - Create a Service Account with Drive read access
   - Download the JSON credentials file

2. **Share your Google Drive folder with the Service Account**
   - Create a folder in Google Drive for your WhatsApp exports
   - Share the folder with the service account email (found in the JSON file)
   - Give it "Viewer" access
   - Copy the folder ID from the folder URL: `https://drive.google.com/drive/folders/FOLDER_ID_HERE`

3. **Add GitHub Secrets**

   Go to your GitHub repository â†’ Settings â†’ Secrets â†’ Actions, and add:

   - `GOOGLE_DRIVE_CREDENTIALS`: Paste the entire contents of your service account JSON file
   - `GEMINI_API_KEY`: Your Google Gemini API key from [AI Studio](https://aistudio.google.com/apikey)
   - `GDRIVE_FOLDER_ID`: The folder ID from step 2

4. **Workflow Behavior**

   The workflow (`.github/workflows/auto-update.yml`):
   - Runs daily at 2 AM UTC (customizable)
   - Can be triggered manually from Actions tab
   - Downloads the newest ZIP file from your Google Drive folder
   - Skips processing if the file hasn't changed (uses hash tracking)
   - Processes the export with egregora
   - Commits and deploys to GitHub Pages

5. **Manual Trigger**

   ```bash
   # Via GitHub CLI
   gh workflow run auto-update.yml

   # Or go to Actions â†’ Auto-Update Site â†’ Run workflow
   ```

### Files Structure

```
.github/
â”œâ”€â”€ workflows/
â”‚   â””â”€â”€ auto-update.yml              # Main workflow
â””â”€â”€ scripts/
    â””â”€â”€ download-latest-export.py    # Google Drive downloader
```

## ğŸ“– Documentation

- [Egregora v2 Documentation](https://github.com/franklinbaldo/egregora)
- [MkDocs Material](https://squidfunk.github.io/mkdocs-material/)
- [GitHub Actions Documentation](https://docs.github.com/en/actions)

---

*Generated by Egregora v2*
