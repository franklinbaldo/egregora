{% extends "main.html" %}

{% block content %}
<article class="md-content__inner md-typeset">
  <!-- Reading Progress Bar -->
  <div id="reading-progress-bar"></div>

  <!-- Post Header -->
  <header class="post-header">
    <div class="post-tags">
      {% for tag in page.meta.tags %}
      <a href="{{ 'posts/tags.md' | url }}#{{ tag | slugify }}" class="tag">{{ tag }}</a>
      {% endfor %}
    </div>

    {% if page.meta.banner %}
    <div class="post-banner">
      <img src="{{ page.meta.banner | url }}" alt="{{ page.title }} banner">
    </div>
    {% elif page.meta.image %}
    <div class="post-banner">
      <img src="{{ page.meta.image | url }}" alt="{{ page.title }} banner">
    </div>
    {% endif %}

    <h1>{{ page.title }}</h1>
    <div class="post-meta">
      {% set authors_data = get_authors_data(page.meta.authors) %}
      {% for author in authors_data %}
      <div class="author-container">
        <a href="{{ 'profiles/' ~ author.uuid ~ '.md' | url }}" class="author">
          <img src="{{ author.avatar }}" alt="{{ author.name }}">
          <span>{{ author.name }}</span>
        </a>
        <div class="author-card-wrapper">
          {% include "partials/author_card.html" %}
        </div>
      </div>
      {% endfor %}
      <span class="date">{{ page.meta.date }}</span>
      <span class="reading-time">{{ page.meta.reading_time }} min read</span>
    </div>
    {% if page.meta.summary %}
    <div class="tldr">
      <p>{{ page.meta.summary }}</p>
    </div>
    {% endif %}
  </header>

  {{ page.content }}

  <!-- Related Posts Section -->
  {% if page.meta.related_posts %}
  <section class="related-posts">
    <h2>Continue the Conversation</h2>
    <p class="related-posts-subtitle">These posts share similar themes and topics</p>
    <div class="related-posts-grid">
      {% for post in page.meta.related_posts[:3] %}
      <a href="{{ post.url }}" class="related-post-card">
        <h3>{{ post.title }}</h3>
        <div class="related-post-meta">
          <span class="reading-time">ðŸ“– {{ post.reading_time }} min read</span>
        </div>
      </a>
      {% endfor %}
    </div>
  </section>
  {% endif %}

</article>
{% endblock %}
