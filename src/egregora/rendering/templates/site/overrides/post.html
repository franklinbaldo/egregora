{% extends "main.html" %}

{% block content %}
<article class="md-content__inner md-typeset">
  <!-- Reading Progress Bar -->
  <div id="reading-progress-bar"></div>

  <!-- Post Header -->
  <header class="post-header">
    <div class="post-tags">
      {% for tag in page.meta.tags %}
      <a href="{{ 'posts/tags.md' | url }}#{{ tag | slugify }}" class="tag">{{ tag }}</a>
      {% endfor %}
    </div>
    <h1>{{ page.title }}</h1>
    <div class="post-meta">
      {% set authors_data = get_authors_data(page.meta.authors) %}
      {% for author in authors_data %}
      <div class="author-container">
        <a href="{{ 'profiles/' ~ author.uuid ~ '.md' | url }}" class="author">
          <img src="{{ author.avatar }}" alt="{{ author.name }}">
          <span>{{ author.name }}</span>
        </a>
        <div class="author-card-wrapper">
          {% include "partials/author_card.html" %}
        </div>
      </div>
      {% endfor %}
      <span class="date">{{ page.meta.date }}</span>
      <span class="reading-time">{{ page.meta.reading_time }} min read</span>
    </div>
    {% if page.meta.summary %}
    <div class="tldr">
      <p>{{ page.meta.summary }}</p>
    </div>
    {% endif %}
  </header>

  {{ page.content }}

  <!-- Related Posts -->
  <section class="related-posts">
    <h2>Continue Reading</h2>
    <div class="related-posts-grid">
      {% for post in page.meta.related_posts %}
      <div class="related-post-card">
        <h3 class="related-post-title"><a href="{{ post.url }}">{{ post.title }}</a></h3>
        <div class="related-post-meta">
          <span>{{ post.reading_time }} min read</span>
          {% if post.reason %}
          <span class="related-post-reason">{{ post.reason }}</span>
          {% endif %}
        </div>
      </div>
      {% endfor %}
    </div>
  </section>
</article>
{% endblock %}
