# Exemplo de configura√ß√£o para o pipeline do Egregora.
# Fa√ßa uma c√≥pia (`cp egregora.toml.example egregora.toml`) e ajuste conforme seu ambiente.

[directories]
# Onde os exports .zip do WhatsApp ser√£o procurados.
zips_dir = "data/whatsapp_zips"
# Pasta onde os dados dos grupos ser√£o armazenados. As newsletters ficam em
# "newsletters/<grupo>/daily" dentro dessa raiz.
newsletters_dir = "data/newsletters"

[pipeline]
# Modelo padr√£o usado para gerar as newsletters.
model = "gemini-flash-lite-latest"
# Fuso hor√°rio utilizado para determinar a data das newsletters.
timezone = "America/Porto_Velho"
# Evita processar grupos reais que j√° fazem parte de um grupo virtual.
skip_real_if_in_virtual = true
# Configura√ß√£o opcional para buscar ZIPs em fonte remota (ex.: Google Drive).
# Recomenda-se definir `PIPELINE__REMOTE_SOURCE__GDRIVE_URL` via ambiente para manter sigilo.
# [pipeline.remote_source]
# gdrive_url = "https://drive.google.com/uc?id=EXEMPLO"

[enrichment]
# Define se o m√≥dulo de enriquecimento est√° ativo.
enabled = true
# Modelo dedicado para analisar links compartilhados.
enrichment_model = "gemini-2.0-flash-exp"
# Quantidade m√°xima de links analisados por execu√ß√£o.
max_links = 50
# Nota m√≠nima (1‚Äì5) para um link ser inclu√≠do no prompt final.
relevance_threshold = 3
# Mensagens vizinhas consideradas como contexto (antes/depois).
context_window = 3
# Chamadas simult√¢neas permitidas ao modelo de enriquecimento.
max_concurrent_analyses = 5
# Limite de tempo, em segundos, para o enriquecimento.
max_total_enrichment_time = 120.0

[cache]
# Controle do cache persistente das an√°lises de links.
enabled = true
cache_dir = "cache"
auto_cleanup_days = 90
max_disk_mb = 100

[anonymization]
# Converte nomes/telefones em identificadores an√¥nimos antes de qualquer prompt.
enabled = true
# Formatos dispon√≠veis: "human", "short", "full".
output_format = "human"

[rag]
# Habilite para usar o m√≥dulo de recupera√ß√£o de newsletters anteriores.
enabled = false
# Consulte docs/embeddings.md para ajustar par√¢metros adicionais se necess√°rio.

# --- EXEMPLOS DE GRUPOS VIRTUAIS ---
[merges.rc-americas]
name = "RC Americas"
groups = ["rc-latam", "rc-brasil", "rc-mexico"]
tag_style = "emoji"
emojis = { rc-latam = "üåé", rc-brasil = "üáßüá∑", rc-mexico = "üá≤üáΩ" }
# model = "gemini-2.0-flash-exp"  # Opcional: sobrescreve o modelo apenas para este grupo virtual.

[merges.tech-all]
name = "Tech Ecosystem"
groups = ["tech-discussion", "tech-jobs", "programming"]
tag_style = "brackets"
# model = "gemini-1.5-flash"

[merges.family-extended]
name = "Extended Family"
groups = ["family-core", "family-cousins"]
tag_style = "prefix"
